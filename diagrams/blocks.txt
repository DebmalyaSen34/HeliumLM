┌─────────────────────────────────────────────────────────────┐
│                    DECODER BLOCK FLOW                       │
└─────────────────────────────────────────────────────────────┘

                    Input Tensor x
                    [B, T, d_model]
                           │
                           ▼
                    ┌──────────┐
                    │ residual │◄─────────┐
                    │    = x   │          │
                    └──────────┘          │
                           │              │
                           ▼              │
                  ┌─────────────────┐     │
                  │   RMSNorm       │     │
                  │  (input layer)  │     │
                  └─────────────────┘     │
                           │              │
                           ▼              │
              ┌─────────────────────────┐ │
              │  EfficientAttention     │ │
              │  • GQA (8→2 heads)      │ │
              │  • Sliding Window (16)  │ │
              └─────────────────────────┘ │
                           │              │
                           ▼              │
                    ┌──────────┐          │
                    │    +     │◄─────────┘
                    │ (Residual)
                    └──────────┘
                           │
                           ▼
                    ┌──────────┐
                    │ residual │◄─────────┐
                    │    = x   │          │
                    └──────────┘          │
                           │              │
                           ▼              │
                  ┌─────────────────┐     │
                  │   RMSNorm       │     │
                  │ (post attention)│     │
                  └─────────────────┘     │
                           │              │
                           ▼              │
              ┌─────────────────────────┐ │
              │    SwiGLU MLP           │ │
              │ ┌─────────┬─────────┐   │ │
              │ │  Gate   │   Up    │   │ │
              │ │  Proj   │  Proj   │   │ │
              │ └────┬────┴────┬────┘   │ │
              │      │         │        │ │
              │      ▼         ▼        │ │
              │    SiLU       (x)       │ │
              │      │         │        │ │
              │      └────×────┘        │ │
              │           │             │ │
              │           ▼             │ │
              │      Down Proj          │ │
              └─────────────────────────┘ │
                           │              │
                           ▼              │
                    ┌──────────┐          │
                    │    +     │◄─────────┘
                    │ (Residual)
                    └──────────┘
                           │
                           ▼
                    Output Tensor
                    [B, T, d_model]